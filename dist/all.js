"use strict";function addClasses(e,t){t.forEach(function(t){e.classList.add(t)})}function actionsButton(t,e,n,s){var a=new Element("input",n);a.addClass("btn",e),a.addAttribute("type","button"),a.addAttribute("value",t),a.newElement.addEventListener("click",s)}function saveUsersIntoLocalStorage(){var t=JSON.stringify(users);localStorage.setItem("users",t)}
"use strict";var _createClass=function(){function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Element=function(){function t(e,n){_classCallCheck(this,t),this.newElement=document.createElement(e),n.appendChild(this.newElement)}return _createClass(t,[{key:"addClass",value:function(){for(var n=this,e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach(function(e){n.newElement.classList.add(e)})}},{key:"addContent",value:function(e){this.newElement.innerHTML=e}},{key:"addAttribute",value:function(e,n){this.newElement.setAttribute(e,n)}}]),t}();
"use strict";function _classCallCheck(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var User=function s(a,e,n,t,i,c){_classCallCheck(this,s),this.name=a,this.age=e,this.email=n,this.phoneNumber=t,this.bankCardNumber=i,this.gender=c};
"use strict";var users=[new User("Donald",50,"donald@test.com","+380931234545","4512 1234 4555 8888","m"),new User("Goofy",30,"goofy@test.com","+380974565656","","m"),new User("Mickey",40,"mickey@test.com","+380957898989","","m"),new User("Vinny",35,"vinny@test.com","+380959998877","","m")],genders={m:"Male",f:"Female"};
"use strict";var _createClass=function(){function i(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Form=function(){function e(){_classCallCheck(this,e),this.form=document.forms.addForm,this.formElements=document.forms.addForm.elements,this.nameField=this.formElements.name,this.emailField=this.formElements.email,this.ageField=this.formElements.age,this.phoneNumberField=this.formElements.userPhoneNumber,this.bankCardNumberField=this.formElements.bankCardNumber,this.genderField=this.formElements.gender}return _createClass(e,[{key:"toogleAddBlock",value:function(){document.getElementById("addBlock").classList.toggle("hidden")}},{key:"clearErrorAllFormFields",value:function(){e.clearErrorMessage([this.nameField.parentNode,this.emailField.parentNode,this.ageField.parentNode,this.phoneNumberField.parentNode,this.bankCardNumberField.parentNode,document.getElementById("userGender")])}},{key:"isValidName",value:function(e){return/^[A-ZА-ЯЁ][a-zа-яё]+$/.test(e)}},{key:"isValidEmail",value:function(e){return/((\w+\.)*\w+)@((\w+\.)+\w+)/.test(e)}},{key:"isValidAge",value:function(e){return/^([1][8-9]|[2-9][0-9]|[1][0-2][0])$/.test(e)}},{key:"isValidPhoneNumber",value:function(e){return/^\+(380)\d{9}$/.test(e)}},{key:"isValidBankCardNumber",value:function(e){return/^(\d{4} ){3}\d{4}$/.test(e)}},{key:"showError",value:function(e,r){e.classList.add("error");var t=new Element("div",e);t.addClass("error-msg"),t.addContent(r)}},{key:"addNewDataToTable",value:function(){(new Table).generateTable()}},{key:"clearFormElements",value:function(e){for(var r=0;r<e.length;r++)if("gender"===e[r])for(var t=0;t<this.form.gender.length;t++)this.form.gender[t].checked=!1;else this.form.elements[e[r]].value=""}},{key:"formValidation",value:function(){var e=document.getElementById("userGender");this.nameField.value?this.isValidName(this.nameField.value)||this.showError(this.nameField.parentNode,"Enter correct name"):this.showError(this.nameField.parentNode,"Enter your name"),this.emailField.value?this.isValidEmail(this.emailField.value)||this.showError(this.emailField.parentNode,"Email address is incorrect"):this.showError(this.emailField.parentNode,"Enter your email"),this.ageField.value||this.showError(this.ageField.parentNode,"Enter your age"),this.phoneNumberField.value?this.isValidPhoneNumber(this.phoneNumberField.value)||this.showError(this.phoneNumberField.parentNode,"Enter correct phone number +380xxxxxxxxx"):this.showError(this.phoneNumberField.parentNode,"Enter your phone number"),this.bankCardNumberField.value?this.isValidBankCardNumber(this.bankCardNumberField.value)||this.showError(this.bankCardNumberField.parentNode,"Enter correct credit card number xxxx xxxx xxxx xxxx"):this.showError(this.bankCardNumberField.parentNode,"Enter your credit card number"),this.genderField.value||this.showError(e,"Indicate your gender")}}],[{key:"clearErrorMessage",value:function(e){for(var r=0;r<e.length;r++)e[r].classList.remove("error"),"error-msg"===e[r].lastChild.className&&e[r].lastChild.remove()}}]),e}();
"use strict";var _createClass=function(){function r(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,a,n){return a&&r(e.prototype,a),n&&r(e,n),e}}();function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var Table=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"generateTable",value:function(){a.clearTable();var e=document.getElementById("table");addClasses(e,["col-md-8","col-sm-12","mx-auto","m-3","border-top"]),a.generateTableHeader(e),a.generateUserRows(e),a.createAddButton(e)}}],[{key:"clearTable",value:function(){document.getElementById("table").innerHTML=""}},{key:"generateTableHeader",value:function(e){var a=new Element("div",e);function n(e,a){var n=new Element("div",a);n.addClass("col","text-center"),n.addContent(e)}a.addClass("row","p-2"),n("Name",a.newElement),n("Email",a.newElement),n("",a.newElement)}},{key:"generateUserRows",value:function(l){function t(e,a){var n=new Element("div",a);n.addClass("col","text-center","border-top","p-1"),n.addContent(e)}function d(){var e=document.getElementById("viewBlock");addClasses(e,["hidden"]),e.innerHTML="",e.classList.toggle("hidden");var a=s(this);n("Name","name",a,e),n("Email","email",a,e),n("Gender","gender",a,e,!0),n("Age","age",a,e),n("Phone number","phoneNumber",a,e),actionsButton("Close","btn-info",e,r)}function i(){document.getElementById("viewBlock").classList.add("hidden");var a=s(this),n=new Form;n.nameField.value=users[a].name,n.emailField.value=users[a].email,n.ageField.value=users[a].age,n.phoneNumberField.value=users[a].phoneNumber,n.bankCardNumberField.value=users[a].bankCardNumber;for(var e=users[a].gender,r=0;r<n.genderField.length;r++)n.genderField[r].value===e&&(n.genderField[r].checked=!0);n.toogleAddBlock(),document.getElementById("saveBtn").onclick=function(){n.clearErrorAllFormFields(),n.isValidName(n.nameField.value)?users[a].name=n.nameField.value:n.showError(n.nameField.parentNode,"Enter correct name"),n.isValidEmail(n.emailField.value)?users[a].email=n.emailField.value:n.showError(n.emailField.parentNode,"Enter correct email address"),n.isValidAge(n.ageField.value)?users[a].age=n.ageField.value:n.showError(n.ageField.parentNode,"Enter correct age"),n.isValidPhoneNumber(n.phoneNumberField.value)?users[a].phoneNumber=n.phoneNumberField.value:n.showError(n.phoneNumberField.parentNode,"Enter correct phone number +380xxxxxxxxx"),n.isValidBankCardNumber(n.bankCardNumberField.value)?users[a].bankCardNumber=n.bankCardNumberField.value:n.showError(n.bankCardNumberField.parentNode,"Enter correct credit card number xxxx xxxx xxxx xxxx");for(var e=0;e<n.genderField.length;e++)n.genderField[e].checked&&(users[a].gender=n.genderField[e].value);n.isValidName(n.nameField.value)&&n.isValidEmail(n.emailField.value)&&n.isValidAge(n.ageField.value)&&n.isValidPhoneNumber(n.phoneNumberField.value)&&n.isValidBankCardNumber(n.bankCardNumberField.value)&&(n.toogleAddBlock(),saveUsersIntoLocalStorage(),n.addNewDataToTable())}}function o(){var e=confirm("Do you really want to delete the user?"),a=s(this);e&&(users.splice(a,1),saveUsersIntoLocalStorage(),(new Form).addNewDataToTable())}function s(e){return e.parentNode.getAttribute("data-index")}function n(e,a,n,r,l){var t=new Element("div",r);if(l){var d=genders[users[n][a]];t.addContent(e+" "+d)}else t.addContent(e+" "+users[n][a])}function r(){this.parentNode.classList.add("hidden")}localStorage.getItem("users")&&(users=JSON.parse(localStorage.getItem("users"))),users.forEach(function(e,a){var n=new Element("div",l);n.addClass("row"),t(e.name,n.newElement),t(e.email,n.newElement);var r=new Element("div",n.newElement);r.addClass("col","text-center","border-top","d-flex","justify-content-around","p-1"),r.addAttribute("data-index",a),actionsButton("View","btn-outline-info",r.newElement,d),actionsButton("Edit","btn-outline-success",r.newElement,i),actionsButton("Delete","btn-outline-danger",r.newElement,o)})}},{key:"createAddButton",value:function(e){var a=new Element("div",e);a.addClass("row","d-flex","justify-content-end","border-top","p-3"),actionsButton("Add user","btn-secondary",a.newElement,function(){document.getElementById("viewBlock").classList.contains("hidden")||document.getElementById("viewBlock").classList.add("hidden");var n=new Form;n.clearFormElements(["name","email","age","userPhoneNumber","bankCardNumber","gender"]),n.toogleAddBlock(),n.clearErrorAllFormFields(),document.getElementById("saveBtn").onclick=function(){if(n.clearErrorAllFormFields(),n.formValidation(),n.isValidName(n.nameField.value)&&n.isValidEmail(n.emailField.value)&&n.isValidAge(n.ageField.value)&&n.isValidPhoneNumber(n.phoneNumberField.value)&&n.isValidBankCardNumber(n.bankCardNumberField.value)&&n.genderField.value){var e=new User(n.nameField.value,n.ageField.value,n.emailField.value,n.phoneNumberField.value,n.bankCardNumberField.value,n.genderField.value);users.push(e),n.toogleAddBlock();var a=JSON.stringify(users);localStorage.setItem("users",a),n.addNewDataToTable(),n.clearFormElements(["name","email","age","userPhoneNumber","bankCardNumber","gender"])}}})}}]),a}();
"use strict";document.getElementById("showBtn").onclick=function(){document.getElementById("showBtnArea").style.display="none",(new Table).generateTable()};